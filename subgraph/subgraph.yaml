specVersion: 0.0.7
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: SpeculateCore
    network: chapel  # BSC Testnet
    source:
      address: "0x02344e92a5389D3cB0100844eE262CA10818aC6e"  # Update with your deployed address
      abi: SpeculateCore
      startBlock: 50000000  # Start from much earlier block to catch all events
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Market
        - Trade
        - Holder
        - Candle
      abis:
        - name: SpeculateCore
          file: ./abis/SpeculateCore.json
        - name: PositionToken
          file: ./abis/PositionToken.json
      eventHandlers:
        - event: MarketCreated(indexed uint256,address,address,string,uint256,uint256,uint256)
          handler: handleMarketCreated
        - event: BuyYes(indexed uint256,indexed address,uint256,uint256,uint256)
          handler: handleBuyYes
        - event: BuyNo(indexed uint256,indexed address,uint256,uint256,uint256)
          handler: handleBuyNo
        - event: SellYes(indexed uint256,indexed address,uint256,uint256,uint256)
          handler: handleSellYes
        - event: SellNo(indexed uint256,indexed address,uint256,uint256,uint256)
          handler: handleSellNo
      file: ./src/mapping.ts
